@page "/almacenes/agregar"
@inject AlmacenService AlmacenService
@inject NavigationManager Navigation
@using Veterinaria.MAUIApp.Models
@using Veterinaria.MAUIApp.Services

<h3>Agregar nuevo almacén</h3>

<EditForm Model="modelo" OnValidSubmit="Guardar">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="mb-3">
        <label>Nombre:</label>
        <InputText @bind-Value="modelo.Nombre" class="form-control" />
    </div>

    <div class="mb-3">
        <label>Ubicación:</label>
        <InputText @bind-Value="modelo.Ubicacion" class="form-control" />
    </div>

    <div class="mb-3">
        <label>Activo:</label>
        <InputCheckbox @bind-Value="modelo.Activo" class="form-check-input" />
    </div>

    <button type="submit" class="btn btn-success">Guardar</button>
    <button type="button" class="btn btn-secondary" @onclick="Cancelar">Cancelar</button>
</EditForm>

@code {
    private AlmacenGuardar modelo = new();

    private async Task Guardar()
    {
        var resultado = await AlmacenService.CrearAsync(modelo);
        if (resultado is not null)
        {
            Navigation.NavigateTo("/almacenes/index");
        }
        else
        {
            Console.WriteLine("❌ Error al crear almacén");
        }
    }

    private void Cancelar() => Navigation.NavigateTo("/almacenes/index");
}
