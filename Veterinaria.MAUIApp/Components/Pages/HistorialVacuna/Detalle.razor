@page "/historial-vacunas/detalle/{id:int}"
@using Veterinaria.MAUIApp.Models.Dtos
@using Veterinaria.MAUIApp.Services
@inject HistorialVacunaService HistorialService
@inject NavigationManager NavManager

<h3>🔎 Detalle de Historial de Vacuna</h3>

@if (historial == null)
{
    <p><em>Cargando...</em></p>
}
else
{
    <div class="card p-3">
        <p><strong>ID:</strong> @historial.HistorialVacunaId</p>
        <p><strong>Mascota:</strong> @historial.NombreMascota</p>
        <p><strong>Vacuna:</strong> @historial.NombreVacuna</p>
        <p><strong>Fecha Aplicación:</strong> @historial.FechaAplicacion.ToString("dd/MM/yyyy")</p>
        <p><strong>Próxima Dosis:</strong> @(historial.ProximaDosis?.ToString("dd/MM/yyyy") ?? "—")</p>
        <p><strong>Observaciones:</strong> @historial.Observaciones</p>
        <p><strong>Estado:</strong> @historial.Estado</p>
    </div>

    <div class="mt-3">
        <button class="btn btn-secondary" @onclick="Volver">🔙 Volver</button>
    </div>
}

@code {
    [Parameter] public int Id { get; set; }
    private HistorialVacunaRes? historial;

    protected override async Task OnInitializedAsync()
    {
        historial = await HistorialService.GetHistorialByIdAsync(Id);
    }

    private void Volver() => NavManager.NavigateTo("/historial-vacunas");
}
